#!/bin/bash

# Test if actions are recognized

trap 'rm $TMP1 $TMP2' 0
TMP1=`mktemp /tmp/topics-XXXXXX` || exit 1
TMP2=`mktemp /tmp/topics-XXXXXX` || exit 1

cat >$TMP1 <<EOF
<foo> Not a topic
<foo>  Action: bar to do this
<bar> Action baz: do the same
<baz> action : bar do this, too
<foo>   ACTION foo to stop giving actions
EOF

perl scribe.perl $TMP1 >$TMP2 || exit 1

grep '<li><a href="#x01">bar to do this</a></li>' $TMP2 || exit 1
grep '<li><a href="#x02">baz: do the same</a></li>' $TMP2 || exit 1
grep '<li><a href="#x03">bar do this, too</a></li>' $TMP2 || exit 1
grep '<li><a href="#x04">foo to stop giving actions</a></li>' $TMP2 || exit 1
